""" MAIN {{{
" for when using elsewhere
set fsync backspace=indent,eol,start updatetime=290
set encoding=utf-8 fileencoding=utf-8
set incsearch nohlsearch ignorecase smartcase
set shell=/bin/bash foldmethod=marker

set number relativenumber
set splitright splitbelow
set mouse=a mousefocus clipboard=unnamedplus
set smarttab autoindent copyindent
set scrolloff=4  " 4 lines of context when scrolling
syntax enable
set history=1000 undolevels=1000 updatecount=100
set autoread nospell
set ttimeoutlen=10
" non-printable and double-width chars
set ambiwidth=single "showbreak=↪\ "
set listchars=tab:¦\ ,precedes:←,extends:→,nbsp:‡,trail:·,eol:¬
" default tab->2 spaces, use multiples of 2 when autoindenting
set tabstop=2 shiftwidth=2 shiftround
" wrap shiz
set linebreak nolist
set whichwrap=b,s,~
filetype indent plugin on
set directory=~/.cache/vim/tmp undodir=~/.cache/vim/undo viminfofile=~/.cache/vim/viminfo
set noshowmode showcmd noerrorbells visualbell
" }}}
""" VIM-PLUG {{{

" install vim-plug if it's not already there
if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

call plug#begin('~/.vim/plugs')
" docs
Plug 'jamessan/vim-gnupg'
Plug 'vim-pandoc/vim-pandoc'
Plug 'vim-pandoc/vim-pandoc-syntax'
Plug 'vim-pandoc/vim-pandoc-after'
Plug 'dhruvasagar/vim-table-mode'
" Plug 'xuhdev/vim-latex-live-preview'
Plug 'jceb/vim-orgmode'

" views + candy
Plug 'morhetz/gruvbox'
Plug 'mhinz/vim-startify'
Plug 'w0rp/ale'
Plug 'roxma/vim-hug-neovim-rpc'
" if !has('nvim')
"   Plug 'roxma/vim-hug-neovim-rpc'
" endif
Plug 'roxma/nvim-completion-manager'

" completion + linters
Plug 'calebeby/ncm-css'
Plug 'google/yapf', { 'rtp': 'plugins/vim', 'for': 'python' }

" Plug 'python-mode/python-mode', {'branch': 'develop'}
Plug 'ctrlpvim/ctrlp.vim'
Plug 'tpope/vim-surround'
"Plug 'majutsushi/tagbar'
Plug 'xolox/vim-misc'
Plug 'xolox/vim-easytags'
Plug 'junegunn/goyo.vim'
Plug 'chrisbra/colorizer'
Plug 'Raimondi/delimitMate'
Plug 'sjl/gundo.vim'
Plug 'godlygeek/tabular'
Plug 'tpope/vim-commentary'
Plug 'severin-lemaignan/vim-minimap'

Plug 'johngrib/vim-game-snake'

call plug#end() "}}}
""" VISUALS {{{

set laststatus=2
set showtabline=2
set shortmess=filnrxtWc
set termguicolors conceallevel=2

" Gruvbox on GUI
if has('gui_running')
  set guioptions='PAciMg'  " remove cruft
  set guifont="Knack 13,Hasklig 13"
  set guipty
  set background=dark
  colorscheme gruvbox
  let g:gruvbox_italic = 1
  let g:gruvbox_contrast_dark='oft'
  let g:gruvbox_guisp_fallback='fg'
  let g:gruvbox_termcolors=256
else
  colorscheme fruchtig
endif

" set cursor shape on libvte-based terminals:
" block in normal mode
" I-beam in insert
" Underline in replace
let &t_SI = "\<Esc>[6 q"
let &t_SR = "\<Esc>[4 q"
let &t_EI = "\<Esc>[2 q"

" set gcr=a:block

" " mode aware cursors
" set gcr+=o:hor50-Cursor
" set gcr+=n:Cursor
" set gcr+=i-ci-sm:InsertCursor
" set gcr+=r-cr:ReplaceCursor-hor20
" set gcr+=c:CommandCursor
" set gcr+=v-ve:VisualCursor

" set gcr+=a:blinkon0

" hi InsertCursor  ctermfg=15 guifg=#fdf6e3 ctermbg=37  guibg=#2aa198
" hi VisualCursor  ctermfg=15 guifg=#fdf6e3 ctermbg=125 guibg=#d33682
" hi ReplaceCursor ctermfg=15 guifg=#fdf6e3 ctermbg=65  guibg=#dc322f
" hi CommandCursor ctermfg=15 guifg=#fdf6e3 ctermbg=166 guibg=#cb4b16
" }}}
" Autocommands TODO {{{

autocmd BufRead,BufNewFile *.txt set spell spelllang=en textwidth=80
autocmd FileType *.ino,*.pde set filetype=arduino
autocmd FileType *mail set nospell number
autocmd FileType mail let b:loaded_delimitMate = 1

" }}}
